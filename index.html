<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OTENZZA — Presence. Identity. Precision.</title>
  <meta name="description" content="A private, intentional space. No feed. No vanity metrics. Just your Cube." />
  <link rel="icon" href="/favicon.ico" />

  <!-- Tailwind (ok p/ protótipo) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={theme:{extend:{colors:{zinc:{950:'#0b0b0d'}, otenzza:{blue:'#214BFF'}}}}}</script>

  <!-- Import map para módulos ES do Three.js -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.158.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.158.0/examples/jsm/"
    }
  }
  </script>

  <style>
    /* Fundo pontilhado sutil */
    .grid-bg {
      background-image: radial-gradient(rgba(255,255,255,0.06) 1px, transparent 1px);
      background-size: 24px 24px;
    }

    /* Área do stage (WebGL) */
    #stage {
      position: relative;
      width: min(88vw, 960px);
      height: min(62vh, 520px);
      margin: 0 auto;
      border-radius: 24px;
      overflow: hidden;
    }

    /* ===== CSS Cube fallback (quando WebGL não subir) ===== */
    #css-fallback { display: none; }
    .css-cube-wrap{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;perspective:1000px}
    .css-cube{
      --u: min(62vmin, 420px);
      width: var(--u); height: var(--u);
      position:relative; transform-style:preserve-3d; transition:transform .1s linear;
      will-change: transform;
    }
    .css-face{
      position:absolute; width:100%; height:100%;
      border-radius:18px; backface-visibility:hidden;
      box-shadow:0 0 0 1px rgba(255,255,255,.08) inset;
    }
    .css-face.front  { transform: translateZ(calc(var(--u) / 2));              background:#233170; }
    .css-face.back   { transform: rotateY(180deg) translateZ(calc(var(--u) / 2)); background:#101427; }
    .css-face.right  { transform: rotateY( 90deg) translateZ(calc(var(--u) / 2)); background:#2445ff; }
    .css-face.left   { transform: rotateY(-90deg) translateZ(calc(var(--u) / 2)); background:#1a2a63; }
    .css-face.top    { transform: rotateX( 90deg) translateZ(calc(var(--u) / 2)); background:linear-gradient(135deg,#7ea2ff,#214BFF); }
    .css-face.bottom { transform: rotateX(-90deg) translateZ(calc(var(--u) / 2)); background:#141723; }

    /* Botão “beta” discreto */
    .badge { font-size:.72rem; letter-spacing:.08em }
  </style>
</head>
<body class="min-h-screen bg-zinc-950 text-zinc-100 grid-bg">
  <!-- Top bar minimalista -->
  <header class="max-w-6xl mx-auto px-5 py-4 flex items-center justify-between">
    <div class="flex items-center gap-2">
      <span class="inline-block w-2.5 h-2.5 rounded-full bg-otenzza-blue"></span>
      <span class="tracking-widest text-xs font-semibold">OTENZZA</span>
    </div>
    <span class="badge text-zinc-400">/ beta</span>
  </header>

  <!-- Hero -->
  <main class="max-w-6xl mx-auto px-5 pt-6 pb-16">
    <section class="text-center">
      <h1 class="text-3xl sm:text-5xl font-semibold">Presence. Identity. Precision.</h1>
      <p class="text-zinc-400 mt-3">
        A private, intentional space. No feed. No vanity metrics. Just your Cube.
      </p>
    </section>

    <!-- STAGE do cubo -->
    <section class="mt-8">
      <div id="stage" class="bg-black/10 border border-white/10 backdrop-blur-sm"></div>

      <!-- Fallback CSS cube (aparece só se WebGL falhar) -->
      <div id="css-fallback">
        <div class="css-cube-wrap">
          <div class="css-cube" id="cssCube">
            <div class="css-face front"></div>
            <div class="css-face back"></div>
            <div class="css-face right"></div>
            <div class="css-face left"></div>
            <div class="css-face top"></div>
            <div class="css-face bottom"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Lead -->
    <section class="mt-8 flex items-center justify-center gap-3">
      <form action="https://buttondown.email/api/emails/embed-subscribe/YOUR_USERNAME" method="post" target="_blank" class="flex w-full max-w-xl gap-3">
        <input type="email" name="email" required
               class="flex-1 px-4 py-3 rounded-2xl bg-zinc-900 border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/15"
               placeholder="your@email.com" />
        <button class="px-5 py-3 rounded-2xl bg-white text-black font-medium hover:bg-white/90">
          Reserve early access
        </button>
      </form>
    </section>

    <p class="text-center text-xs text-zinc-500 mt-3">Founding members — limited circle.</p>
  </main>

  <!-- ===== WebGL + Fallback ===== -->
  <script type="module">
    const stage = document.getElementById('stage');
    const fallback = document.getElementById('css-fallback');

    // Tenta montar o Three. Se falhar por qualquer motivo, ativa o fallback CSS.
    (async function mount() {
      try {
        await mountThree();
        console.log('WebGL OK — Three.js rodando');
      } catch (err) {
        console.warn('WebGL disponível, mas falhou ao montar Three.js. Usando fallback.', err);
        stage.style.display = 'none';
        fallback.style.display = 'block';
        mountCssCube();
      }
    })();

    async function mountThree(){
      const THREE = await import('three');
      const { OrbitControls } = await import('three/addons/controls/OrbitControls.js');

      // Renderer
      const renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      renderer.setSize(stage.clientWidth, stage.clientHeight);
      renderer.outputColorSpace = THREE.SRGBColorSpace;
      stage.appendChild(renderer.domElement);

      // Cena + câmera
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(28, stage.clientWidth/stage.clientHeight, 0.1, 100);
      camera.position.set(4.2, 2.8, 6.7);
      scene.add(camera);

      // Luzes suaves
      const key = new THREE.DirectionalLight(0xffffff, 1.1); key.position.set(3,4,6); scene.add(key);
      const rim = new THREE.DirectionalLight(0x214BFF, 0.7); rim.position.set(-4,2,-3); scene.add(rim);
      scene.add(new THREE.AmbientLight(0x6b7280, 0.35));

      // Cubo “premium”: material físico, azul profundo
      const geo = new THREE.BoxGeometry(2,2,2, 1,1,1);
      const mat = new THREE.MeshPhysicalMaterial({
        color: 0x214BFF,
        metalness: 0.15,
        roughness: 0.25,
        clearcoat: 0.6,
        clearcoatRoughness: 0.2,
        sheen: 0.0,
        envMapIntensity: 0.4
      });
      const cube = new THREE.Mesh(geo, mat);
      cube.rotation.set(0.35, 0.55, 0);
      scene.add(cube);

      // Controles (mouse/touch)
      const controls = new OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.enablePan = false;
      controls.minDistance = 4; controls.maxDistance = 12;

      // Resize
      addEventListener('resize', () => {
        const w = stage.clientWidth, h = stage.clientHeight;
        renderer.setSize(w, h);
        camera.aspect = w/h; camera.updateProjectionMatrix();
      });

      // Loop
      const clock = new THREE.Clock();
      (function animate(){
        const t = clock.getElapsedTime();
        cube.rotation.y += 0.0025;
        controls.update();
        renderer.render(scene, camera);
        requestAnimationFrame(animate);
      })();
    }

    // Fallback: cubo CSS interativo (arrasta = gira)
    function mountCssCube(){
      const cube = document.getElementById('cssCube');
      let sx=0, sy=0, rx=-18, ry=22, dragging=false;

      const apply = ()=> cube.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
      apply();

      const onDown = e => { dragging=true; sx= (e.touches?.[0]?.clientX ?? e.clientX); sy=(e.touches?.[0]?.clientY ?? e.clientY); };
      const onMove = e => {
        if(!dragging) return;
        const x=(e.touches?.[0]?.clientX ?? e.clientX), y=(e.touches?.[0]?.clientY ?? e.clientY);
        ry += (x-sx)*0.2; rx -= (y-sy)*0.2; sx=x; sy=y; apply();
      };
      const onUp = ()=> dragging=false;

      cube.addEventListener('mousedown', onDown);
      cube.addEventListener('touchstart', onDown, {passive:true});
      window.addEventListener('mousemove', onMove, {passive:false});
      window.addEventListener('touchmove', onMove, {passive:false});
      window.addEventListener('mouseup', onUp);
      window.addEventListener('touchend', onUp);
    }
  </script>
</body>
</html>
